/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x1aed13 from'@ckeditor/ckeditor5-core/src/plugin';import{getRangesWithAttribute as _0x2d1f26}from'./utils';export default class H extends _0x1aed13{['afterInit'](){const _0x25949c=this['editor'];if(!_0x25949c['plugins']['has']('HighlightEditing'))return;const _0x59c578=_0x25949c['plugins']['get']('TrackChangesEditing');_0x59c578['enableCommand']('highlight',(_0x50f68e,_0x57261c={})=>{const _0x1f0977=_0x25949c['model']['document']['selection'],_0x3e2b45=_0x1f0977['getAttribute']('highlight');let _0x37433e,_0x28ade7=_0x57261c['value'];if(_0x1f0977['isCollapsed']){const _0x4671ae=_0x1f0977['getFirstPosition']();if(!_0x1f0977['hasAttribute']('highlight'))return void _0x50f68e(_0x57261c);{const _0xc4af64=_0x46ae8e=>_0x46ae8e['item']['getAttribute']('highlight')===_0x3e2b45,_0x13f665=_0x4671ae['getLastMatchingPosition'](_0xc4af64,{'direction':'backward'}),_0x491377=_0x4671ae['getLastMatchingPosition'](_0xc4af64);_0x37433e=[_0x25949c['model']['createRange'](_0x13f665,_0x491377)],_0x28ade7==_0x3e2b45&&(_0x28ade7=null);}}else{const _0x3629e7=_0x1f0977['getFirstRange']();_0x37433e=_0x28ade7?[_0x3629e7]:_0x2d1f26('highlight',_0x3629e7,_0x25949c['model']);}_0x25949c['model']['change'](()=>{for(const _0x8807f5 of _0x37433e)_0x59c578['markInlineFormat'](_0x8807f5,{'commandName':'highlight','commandParams':[{'value':_0x28ade7}]});});});const {t:t}=_0x25949c['locale'];_0x59c578['_descriptionFactory']['registerDescriptionCallback'](_0xb87216=>{const {type:_0x1e3e16,data:_0x2bd88b}=_0xb87216;if('formatInline'==_0x1e3e16&&'highlight'==_0x2bd88b['commandName']){const _0x3c9fb8=_0x2bd88b['commandParams'][0x0]['value'];if(_0x3c9fb8){const _0x2e3d4b=_0x25949c['config']['get']('highlight.options')['find'](_0x262411=>_0x262411['model']==_0x3c9fb8)['title'],_0x2d7fb2=_0x25949c['locale']['_t'](_0x2e3d4b)['toLowerCase']();return{'type':'format','content':t('*Format:*\x20%0',t({'string':'%0\x20highlight','id':'FORMAT_CUSTOM_HIGHLIGHT'},_0x2d7fb2))};}return{'type':'format','content':t('*Remove\x20format:*\x20%0',t({'string':'highlight','id':'FORMAT_HIGHLIGHT'}))};}});}}