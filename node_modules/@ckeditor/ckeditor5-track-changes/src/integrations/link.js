/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x255bdf from'@ckeditor/ckeditor5-core/src/plugin';import _0x5e9b3b from'@ckeditor/ckeditor5-link/src/findlinkrange';import{getRangesWithAttribute as _0x445a28}from'./utils';export default class R extends _0x255bdf{['afterInit'](){const _0x45fdfc=this['editor'];if(!_0x45fdfc['plugins']['has']('LinkEditing'))return;const _0x4c7c46=_0x45fdfc['plugins']['get']('TrackChangesEditing');_0x4c7c46['enableCommand']('link',(_0x31ced8,_0x984237)=>{const _0x28d04b=_0x45fdfc['model']['document']['selection'];let _0x4026d6=[];if(_0x28d04b['isCollapsed']){if(!_0x28d04b['hasAttribute']('linkHref'))return void _0x31ced8(_0x984237);_0x4026d6=[_0x5e9b3b(_0x28d04b['getFirstPosition'](),_0x28d04b['getAttribute']('linkHref'),_0x45fdfc['model'])];}else _0x4026d6=_0x28d04b['getRanges']();_0x45fdfc['model']['change'](()=>{for(const _0x471b73 of _0x4026d6)_0x4c7c46['markInlineFormat'](_0x471b73,{'commandName':'link','commandParams':[_0x984237]});});}),_0x4c7c46['enableCommand']('unlink',()=>{const _0x34a8d7=this['editor']['model'],_0x128ca4=_0x34a8d7['document']['selection'];_0x34a8d7['change'](()=>{let _0x1fe21b=[];_0x1fe21b=_0x128ca4['isCollapsed']?[_0x5e9b3b(_0x128ca4['getFirstPosition'](),_0x128ca4['getAttribute']('linkHref'),_0x45fdfc['model'])]:_0x445a28('linkHref',_0x128ca4['getFirstRange'](),_0x45fdfc['model']);for(const _0x22b667 of _0x1fe21b)_0x4c7c46['markInlineFormat'](_0x22b667,{'commandName':'unlink','commandParams':[]});});}),_0x4c7c46['_descriptionFactory']['registerDescriptionCallback'](_0x1fd415=>{const {data:_0x1981f1}=_0x1fd415,{t:t}=_0x45fdfc['locale'];if(_0x1981f1){if('link'==_0x1981f1['commandName']){return{'type':'format','content':t('*Set\x20link:*\x20%0','\x22'+_0x1981f1['commandParams'][0x0]+'\x22')};}return'unlink'==_0x1981f1['commandName']?{'type':'format','content':t('*Remove\x20link*')}:void 0x0;}});}}