/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x2d65=['Annotations','destroy','plugins','updateHeight','view','last','_lastItem','container','class','top','change:_lastItem','refresh','change:bottom','bottom','max','targetRect','requires','items','config','bind','add','context','locale','length','_attachToContainer','customView','delete','getIndex','resetTop','push','content','_detachFromContainer','setContainer','clear','getSidebarItemView','change:top','unbind','set','getAnnotationView','list','_annotationViewToSidebarItemView','listenTo','init','targetTop','get','minHeight','remove','stopListening','element','appendChild','sidebar-invalid-layout:\x20Missing\x20positioned\x20container\x20for\x20the\x20editor\x20with\x20a\x20sidebar.'];(function(_0x51859a,_0x2d6524){const _0x426905=function(_0x2f3505){while(--_0x2f3505){_0x51859a['push'](_0x51859a['shift']());}};_0x426905(++_0x2d6524);}(_0x2d65,0x1ba));const _0x4269=function(_0x51859a,_0x2d6524){_0x51859a=_0x51859a-0x0;let _0x426905=_0x2d65[_0x51859a];return _0x426905;};import _0x561577 from'@ckeditor/ckeditor5-core/src/contextplugin';import _0x12bc69 from'./view/sidebarview';import _0x5ebb39 from'./view/sidebaritemview';import _0x1fc459 from'../annotations/annotations';import _0x2b63d2 from'@ckeditor/ckeditor5-utils/src/dom/rect';import _0x2538dc from'@ckeditor/ckeditor5-utils/src/dom/getpositionedancestor';import{isElement as _0x303d8c,throttle as _0x341223}from'lodash-es';import _0x5d00bc from'@ckeditor/ckeditor5-utils/src/ckeditorerror';export default class p extends _0x561577{static get[_0x4269('0x21')](){return[_0x1fc459];}static get['pluginName'](){return'Sidebar';}constructor(_0xa213eb){super(_0xa213eb),this['set'](_0x4269('0x17')),this[_0x4269('0x15')]=this['M'](),this[_0x4269('0x3')]('container',null),this['H']=0x19,this['T']=new Map(),this[_0x4269('0x6')]=new Map();}[_0x4269('0x8')](){this['R']=this[_0x4269('0x26')][_0x4269('0x13')][_0x4269('0xa')](_0x4269('0x11'));const _0x396b18=this[_0x4269('0x26')][_0x4269('0x23')][_0x4269('0xa')]('sidebar.container');_0x396b18&&this[_0x4269('0x31')](_0x396b18);}[_0x4269('0x31')](_0xa90c9c){if(!_0x303d8c(_0xa90c9c))throw new _0x5d00bc('sidebar-setcontainer-invalid-element:\x20Container\x20element\x20is\x20not\x20a\x20HTMLElement.');this[_0x4269('0x18')]=_0xa90c9c;}[_0x4269('0x29')]({viewClass:_0x35c4c1='',spaceBetweenItems:_0x22e00d=0x19}={}){const _0x4871ca=this['context'][_0x4269('0x13')][_0x4269('0xa')](_0x1fc459);if(!_0x303d8c(this['container']))throw new _0x5d00bc('sidebar-attachtocontainer-missing-container:\x20Missing\x20container\x20element.',this);this[_0x4269('0x18')][_0x4269('0xf')](this[_0x4269('0x15')][_0x4269('0xe')]),this[_0x4269('0x15')][_0x4269('0x19')]=_0x35c4c1,this['H']=_0x22e00d,this[_0x4269('0x7')](_0x4871ca,'change:activeView',(_0x59147b,_0x2fc6bc,_0x333ff9)=>{if(_0x333ff9){const _0x28c9a3=_0x4871ca[_0x4269('0x4')](_0x333ff9),_0xa29113=this[_0x4269('0x0')](_0x28c9a3);_0xa29113&&_0xa29113[_0x4269('0x2d')]();}}),this['listenTo'](_0x4871ca[_0x4269('0x22')],_0x4269('0xc'),(_0x150c5c,_0x1a92bc,_0x25ad88)=>{this['q'](_0x1a92bc);const _0x40d1ac=this['R'][_0x4269('0x22')][_0x4269('0xa')](_0x25ad88-0x1),_0x51e2a3=this['R'][_0x4269('0x22')]['get'](_0x25ad88);_0x40d1ac&&this[_0x4269('0x0')](_0x40d1ac)[_0x4269('0x2d')](),_0x51e2a3&&this[_0x4269('0x0')](_0x51e2a3)[_0x4269('0x2d')](),this['F']();}),_0x4871ca[_0x4269('0x1c')]();}[_0x4269('0x30')](){const _0x5e956d=this['R'];this['stopListening'](),this[_0x4269('0x15')][_0x4269('0xe')][_0x4269('0xc')]();for(const _0x4ba4cf of _0x5e956d[_0x4269('0x22')])this['q'](_0x4ba4cf);this[_0x4269('0x15')][_0x4269('0x5')][_0x4269('0x32')](),this['view']['class']='',this[_0x4269('0x17')]=null,this['W']=null;}['addView'](_0x368be0,_0x2cafef){_0x2cafef||(_0x2cafef=_0x368be0);const _0xc59b9b=this['R'],_0x248833=_0x368be0[_0x4269('0x2a')],_0x588eb2=_0xc59b9b['getTarget'](_0x248833),_0x21af67=this[_0x4269('0x18')],_0xdd68f1=this['j'](_0x21af67,_0x588eb2);if(!_0xdd68f1)throw new _0x5d00bc(_0x4269('0x10'));const _0xe6b00a=new _0x5ebb39(this[_0x4269('0x26')][_0x4269('0x27')]);this['T'][_0x4269('0x3')](_0xe6b00a,_0x368be0),this[_0x4269('0x6')][_0x4269('0x3')](_0x368be0,_0xe6b00a),_0xe6b00a[_0x4269('0x2f')][_0x4269('0x25')](_0x2cafef),_0xe6b00a[_0x4269('0x24')](_0x4269('0x9'))['to'](_0x368be0,_0x4269('0x20'),_0x524fd5=>{const _0x5b62aa=new _0x2b63d2(_0xdd68f1)[_0x4269('0x1a')],_0x3d7aa8=new _0x2b63d2(this[_0x4269('0x15')][_0x4269('0xe')])['top']-_0x5b62aa;return _0x524fd5['top']-_0x5b62aa-_0x3d7aa8;}),this[_0x4269('0x7')](_0xe6b00a,_0x4269('0x1'),_0x341223(()=>{if(!_0xe6b00a[_0x4269('0x2f')][_0x4269('0x28')])return;const _0x422d9e=this['G'](_0xe6b00a);if(!_0x422d9e)return;const _0x1cc51a=this['T'][_0x4269('0xa')](_0x422d9e);_0xc59b9b['activeView']===_0x1cc51a['customView']?this['J'](_0x422d9e,_0xe6b00a):this['K'](_0xe6b00a,_0x422d9e);},0xa,{'leading':!0x1})),this['listenTo'](_0xe6b00a,_0x4269('0x1d'),_0x341223(()=>{if(!_0xe6b00a['content'][_0x4269('0x28')])return;const _0x9d6e09=this['O'](_0xe6b00a);if(!_0x9d6e09)return;const _0x223700=this['T'][_0x4269('0xa')](_0x9d6e09);_0xc59b9b['activeView']===_0x223700[_0x4269('0x2a')]?this['K'](_0x9d6e09,_0xe6b00a):this['J'](_0xe6b00a,_0x9d6e09);},0xa,{'leading':!0x1}));const _0x42d83b=this['G'](_0xe6b00a);if(_0x42d83b){this['J'](_0x42d83b,_0xe6b00a)||_0xe6b00a[_0x4269('0x2d')]();}else _0xe6b00a[_0x4269('0x2d')]();return this['F'](),_0xe6b00a;}[_0x4269('0x0')](_0x566e1f){return this[_0x4269('0x6')][_0x4269('0xa')](_0x566e1f);}[_0x4269('0x12')](){this['view']['destroy']();}['q'](_0xdc5ee7){const _0x32ab9e=this[_0x4269('0x0')](_0xdc5ee7);this[_0x4269('0xd')](_0x32ab9e),_0x32ab9e[_0x4269('0x12')](),this[_0x4269('0x6')][_0x4269('0x2b')](_0xdc5ee7),this['T'][_0x4269('0x2b')](_0x32ab9e);}['M'](){const _0x5c945=new _0x12bc69(this[_0x4269('0x26')][_0x4269('0x27')]);return _0x5c945['render'](),this['on'](_0x4269('0x1b'),(_0x35013f,_0x48d632,_0x4b1f3e,_0x2fe40b)=>{_0x2fe40b&&_0x5c945[_0x4269('0x2')](_0x4269('0xb')),_0x4b1f3e?_0x5c945['bind'](_0x4269('0xb'))['to'](_0x4b1f3e,_0x4269('0x1e')):_0x5c945[_0x4269('0xb')]=null;}),_0x5c945;}['F'](){this['_lastItem']=this[_0x4269('0x0')](this['R']['items'][_0x4269('0x16')]);}['G'](_0x39b9e3){const _0x499c29=this['R'][_0x4269('0x22')],_0x49e620=this['T']['get'](_0x39b9e3),_0x1086e1=_0x499c29[_0x4269('0xa')](_0x499c29[_0x4269('0x2c')](_0x49e620)-0x1);return this[_0x4269('0x0')](_0x1086e1);}['O'](_0x326de8){const _0x1ace43=this['R'][_0x4269('0x22')],_0x117ef0=this['T'][_0x4269('0xa')](_0x326de8),_0x139184=_0x1ace43[_0x4269('0xa')](_0x1ace43[_0x4269('0x2c')](_0x117ef0)+0x1);return this['getSidebarItemView'](_0x139184);}['K'](_0x385815,_0x23ad59){_0x385815[_0x4269('0x14')]();const _0x313d99=S(_0x23ad59[_0x4269('0x1e')]+this['H'],_0x385815[_0x4269('0x1a')]);return!!_0x313d99&&(_0x23ad59['top']-=_0x313d99,!0x0);}['J'](_0x174bb4,_0x39102f){_0x174bb4[_0x4269('0x14')]();const _0x5ae615=S(_0x174bb4[_0x4269('0x1e')]+this['H'],_0x39102f['top']);return!!_0x5ae615&&(_0x39102f['top']+=_0x5ae615,!0x0);}['j'](_0x44da73,_0xe22a8a){if(!this['W']){const _0x5f3ad8=V(_0x44da73),_0x542a1c=V(_0xe22a8a);this['W']=function(_0x35b58a,_0x1ca22d){for(let _0x1a5f71=0x0;_0x1a5f71<_0x35b58a[_0x4269('0x28')];_0x1a5f71++)for(let _0x4ba473=0x0;_0x4ba473<_0x1ca22d[_0x4269('0x28')];_0x4ba473++)if(_0x35b58a[_0x1a5f71]===_0x1ca22d[_0x4ba473])return _0x35b58a[_0x1a5f71];}(_0x5f3ad8,_0x542a1c);}return this['W'];}}function V(_0x1de234){const _0x250c9d=[];let _0x3478a7=_0x1de234;for(;null!==_0x3478a7;)_0x3478a7=_0x2538dc(_0x3478a7),_0x3478a7&&_0x250c9d[_0x4269('0x2e')](_0x3478a7);return _0x250c9d;}function S(_0x2a0c92,_0x37154d){return Math[_0x4269('0x1f')](_0x2a0c92-_0x37154d,0x0);}