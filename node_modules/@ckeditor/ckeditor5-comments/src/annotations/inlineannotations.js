/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5021=['listenTo','view','delete','keystrokes','remove','updatePosition','register','isAttached','mousedown','init','change:activeView','change:isFocused','requires','destroy','get','has','pluginName','getAnnotationView','targetRect','context','add','editor','Esc','stopListening','update','customView','editing','set','includes','clear','visibleView','isFocused','activeView','inlineannotations-attach-already-attached:\x20Cannot\x20attach\x20the\x20same\x20annotation\x20twice.','detach','Annotations','getTarget','addObserver','document','items','focusTracker','plugins','attach','hasView','inline','change:selectedViews'];(function(_0x53f03f,_0x502187){const _0x1e7bbb=function(_0x2ea801){while(--_0x2ea801){_0x53f03f['push'](_0x53f03f['shift']());}};_0x1e7bbb(++_0x502187);}(_0x5021,0x1c4));const _0x1e7b=function(_0x53f03f,_0x502187){_0x53f03f=_0x53f03f-0x0;let _0x1e7bbb=_0x5021[_0x53f03f];return _0x1e7bbb;};import _0x3a4bb7 from'@ckeditor/ckeditor5-core/src/plugin';import _0x4837ce from'../annotations/annotations';import _0x1d237d from'./editorannotations';import _0x1acec5 from'@ckeditor/ckeditor5-ui/src/panel/balloon/contextualballoon';import _0x4cffd1 from'@ckeditor/ckeditor5-engine/src/view/observer/mouseobserver';import _0x11bff7 from'@ckeditor/ckeditor5-utils/src/ckeditorerror';import'./../../theme/annotation-inline.css';export default class f extends _0x3a4bb7{static get[_0x1e7b('0x14')](){return[_0x4837ce,_0x1d237d,_0x1acec5];}static get[_0x1e7b('0x18')](){return'InlineAnnotations';}constructor(_0x1a0c8e){super(_0x1a0c8e),_0x1a0c8e[_0x1e7b('0x22')]['view'][_0x1e7b('0x2d')](_0x4cffd1),this[_0x1e7b('0xf')]=!0x1,this['v']=new Set(),this['A']=_0x1a0c8e[_0x1e7b('0x3')][_0x1e7b('0x16')](_0x1acec5),this['I']=new Set();}[_0x1e7b('0x11')](){const _0x451640=this[_0x1e7b('0x1d')]['plugins'][_0x1e7b('0x16')](_0x4837ce);_0x451640[_0x1e7b('0x1b')]===this[_0x1e7b('0x1d')]&&(_0x451640[_0x1e7b('0xe')](_0x1e7b('0x6'),this),this[_0x1e7b('0x1d')][_0x1e7b('0xb')][_0x1e7b('0x23')](_0x1e7b('0x1e'),(_0x2e1a86,_0x2641ae)=>{const _0x31614d=this['A'];this['isAttached']&&_0x31614d[_0x1e7b('0x26')]&&_0x451640['items'][_0x1e7b('0x17')](_0x31614d[_0x1e7b('0x26')])&&(this['v'][_0x1e7b('0x1c')](_0x31614d[_0x1e7b('0x26')]),this['C'](_0x31614d[_0x1e7b('0x26')]),_0x2641ae());}));}['afterInit'](){const _0x45b4a2=this[_0x1e7b('0x1d')][_0x1e7b('0x3')]['get'](_0x4837ce);_0x45b4a2[_0x1e7b('0x1b')]===this[_0x1e7b('0x1d')]&&(_0x45b4a2['uiType']||_0x45b4a2['switchTo'](_0x1e7b('0x6')));}[_0x1e7b('0x15')](){this[_0x1e7b('0xf')]&&this[_0x1e7b('0x2a')]();}[_0x1e7b('0x4')](){const _0x37444a=this['editor'][_0x1e7b('0x3')]['get']('Annotations'),_0x1dd97d=this['A'];if(this[_0x1e7b('0xf')])throw new _0x11bff7(_0x1e7b('0x29'),this);if(_0x37444a['context']!==this[_0x1e7b('0x1d')])throw new _0x11bff7('inlineannotations-not-allowed-with-context:\x20Cannot\x20switch\x20Annotations\x20UI\x20to\x20`InlineAnnotations`\x20when\x20using\x20`Context`.',this);this[_0x1e7b('0x8')](this[_0x1e7b('0x1d')]['ui'][_0x1e7b('0x2')],_0x1e7b('0x13'),(_0x43f7fa,_0x33b591,_0x494331)=>{if(!_0x494331)for(const _0x1323eb of _0x37444a[_0x1e7b('0x1')])this['C'](_0x1323eb);}),this[_0x1e7b('0x8')](_0x37444a[_0x1e7b('0x1')],'remove',(_0xe5577b,_0xac5dac)=>{this['C'](_0xac5dac);}),this[_0x1e7b('0x8')](_0x37444a,_0x1e7b('0x7'),(_0x309c61,_0x46f0ba,_0x74c977,_0x34f5c2)=>{for(const _0x367040 of _0x34f5c2)_0x74c977[_0x1e7b('0x24')](_0x367040)||this['v'][_0x1e7b('0xa')](_0x37444a['getAnnotationView'](_0x367040));for(const _0x5f079c of _0x37444a['items'])_0x74c977[_0x1e7b('0x24')](_0x5f079c[_0x1e7b('0x21')])||this['C'](_0x5f079c);if(this[_0x1e7b('0x1d')]['ui']['focusTracker'][_0x1e7b('0x27')])for(const _0xa45dd6 of _0x74c977)this['V'](_0x37444a[_0x1e7b('0x19')](_0xa45dd6));}),this['listenTo'](_0x37444a,_0x1e7b('0x12'),(_0x413cb7,_0xc2f20a,_0x47fbd4)=>{_0x47fbd4&&this[_0x1e7b('0x1d')]['ui'][_0x1e7b('0x2')][_0x1e7b('0x27')]&&this['V'](_0x37444a['getAnnotationView'](_0x47fbd4),!0x0);}),this[_0x1e7b('0x8')](_0x1dd97d,'change:visibleView',(_0x4fbb4c,_0x5cc41a,_0x32ee6f,_0x291fcc)=>{_0x291fcc&&this[_0x1e7b('0x1f')](_0x291fcc),_0x32ee6f&&_0x37444a[_0x1e7b('0x1')][_0x1e7b('0x17')](_0x32ee6f)&&(this[_0x1e7b('0x8')](_0x32ee6f,'change:height',()=>_0x1dd97d['updatePosition']()),this['listenTo'](_0x32ee6f,'Esc',()=>{this['v'][_0x1e7b('0x1c')](_0x32ee6f),this['C'](_0x32ee6f),this[_0x1e7b('0x1d')]['editing']['view']['focus']();}),_0x37444a[_0x1e7b('0x28')]!==_0x32ee6f[_0x1e7b('0x21')]&&(_0x37444a[_0x1e7b('0x28')]=_0x32ee6f[_0x1e7b('0x21')]));}),this[_0x1e7b('0x8')](this[_0x1e7b('0x1d')]['ui'],_0x1e7b('0x20'),()=>{_0x1dd97d['visibleView']&&_0x37444a[_0x1e7b('0x1')]['has'](_0x1dd97d[_0x1e7b('0x26')])&&_0x1dd97d[_0x1e7b('0xd')]();}),this['listenTo'](this[_0x1e7b('0x1d')]['editing'][_0x1e7b('0x9')][_0x1e7b('0x0')],_0x1e7b('0x10'),()=>{this['v'][_0x1e7b('0x25')](),_0x37444a['refresh']();}),this['isAttached']=!0x0;}['detach'](){if(!this[_0x1e7b('0xf')])throw new _0x11bff7('inlineannotations-detach-not-attached:\x20Cannot\x20detach\x20a\x20UI\x20if\x20it\x20is\x20not\x20attached.',this);const _0x4ba999=this[_0x1e7b('0x1d')][_0x1e7b('0x3')][_0x1e7b('0x16')](_0x1e7b('0x2b')),_0x583b6b=this['A'];for(const _0x1af697 of this['I'])this['C'](_0x1af697);this[_0x1e7b('0x1f')](_0x4ba999[_0x1e7b('0x1')]),this[_0x1e7b('0x1f')](_0x4ba999),this[_0x1e7b('0x1f')](_0x583b6b),this[_0x1e7b('0x1f')](this[_0x1e7b('0x1d')]['ui']),this[_0x1e7b('0x1f')](this[_0x1e7b('0x1d')]['ui'][_0x1e7b('0x2')]),this['stopListening'](this[_0x1e7b('0x1d')][_0x1e7b('0x22')][_0x1e7b('0x9')][_0x1e7b('0x0')]),this[_0x1e7b('0xf')]=!0x1;}['V'](_0x2453de,_0x205020){const _0xcecbc6=this[_0x1e7b('0x1d')][_0x1e7b('0x3')][_0x1e7b('0x16')](_0x4837ce);this['v'][_0x1e7b('0x17')](_0x2453de)||(this['I'][_0x1e7b('0x17')](_0x2453de)||this['A'][_0x1e7b('0x5')](_0x2453de)||(this['I'][_0x1e7b('0x1c')](_0x2453de),this['A']['add']({'stackId':_0x2453de['id'],'view':_0x2453de,'position':{'target':()=>_0xcecbc6[_0x1e7b('0x2c')](_0x2453de[_0x1e7b('0x21')])||_0x2453de[_0x1e7b('0x1a')]}})),_0x205020&&this['A']['showStack'](_0x2453de['id']));}['C'](_0x391d45){this['I']['has'](_0x391d45)&&this['A'][_0x1e7b('0x5')](_0x391d45)&&(this['I']['delete'](_0x391d45),this['A'][_0x1e7b('0xc')](_0x391d45));}}