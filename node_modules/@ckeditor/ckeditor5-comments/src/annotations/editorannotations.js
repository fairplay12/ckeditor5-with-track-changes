/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x343f=['push','listenTo','set','editor','getRanges','remove','sort','get','stop','function','document','keys','addSourceCollector','has','refreshSelectedViews','high','add','init','activeView','EditorAnnotations','containsRange','from','change:isFocused','directChange','items','model','hasDomSelection','selection','editing','view','editorannotations-invalid-source-callback:\x20Function\x20required.','Annotations','cancel','focusTracker','update','plugins','element','requires','isCollapsed','refresh'];(function(_0x55aef4,_0x343fbe){const _0xe2f26e=function(_0xde80c5){while(--_0xde80c5){_0x55aef4['push'](_0x55aef4['shift']());}};_0xe2f26e(++_0x343fbe);}(_0x343f,0x1cc));const _0xe2f2=function(_0x55aef4,_0x343fbe){_0x55aef4=_0x55aef4-0x0;let _0xe2f26e=_0x343f[_0x55aef4];return _0xe2f26e;};import _0x50e47e from'@ckeditor/ckeditor5-core/src/plugin';import _0x10c1b5 from'./annotations';import _0xdb90c0 from'./inlineannotations';import _0x1f3e23 from'@ckeditor/ckeditor5-utils/src/ckeditorerror';import{debounce as _0x473d8a}from'lodash-es';export default class l extends _0x50e47e{static get[_0xe2f2('0x11')](){return[_0x10c1b5,_0xdb90c0];}static get['pluginName'](){return _0xe2f2('0x27');}constructor(_0x15ab85){super(_0x15ab85),this['p']=new Set();}[_0xe2f2('0x25')](){const _0x2b1b51=this[_0xe2f2('0x17')],_0x5063b9=_0x2b1b51['plugins'][_0xe2f2('0x1b')](_0xe2f2('0xb')),_0x9ceb9a=_0x2b1b51[_0xe2f2('0x5')]['document'][_0xe2f2('0x7')],_0x38badb=_0x473d8a(()=>this[_0xe2f2('0x22')](),0xa);_0x9ceb9a['on']('change:range',(_0x5ca394,_0x47b225)=>{_0x47b225[_0xe2f2('0x3')]&&(_0x38badb[_0xe2f2('0xc')](),this[_0xe2f2('0x22')]());}),this[_0xe2f2('0x15')](_0x2b1b51[_0xe2f2('0x8')][_0xe2f2('0x9')][_0xe2f2('0x1e')],_0xe2f2('0x2'),(_0x502519,_0x4c7c24,_0x5820da)=>{_0x5820da&&_0x38badb();}),this['listenTo'](_0x2b1b51['ui'][_0xe2f2('0xd')],_0xe2f2('0x2'),(_0x5c2d9e,_0x30f475,_0x17c05c)=>{_0x17c05c||_0x2b1b51['isReadOnly']||this['g'][_0xe2f2('0x21')](_0x5063b9[_0xe2f2('0x26')])&&(_0x5063b9[_0xe2f2('0x26')]=null);}),_0x5063b9['focusTracker']['on'](_0xe2f2('0x2'),(_0x5bd21c,_0x49c4c3,_0x45bfa1)=>{!_0x45bfa1&&_0x2b1b51[_0xe2f2('0x8')][_0xe2f2('0x9')][_0xe2f2('0x6')]&&(_0x38badb[_0xe2f2('0xc')](),this[_0xe2f2('0x22')](),_0x5bd21c[_0xe2f2('0x1c')]());},{'priority':_0xe2f2('0x23')}),this['listenTo'](this[_0xe2f2('0x17')]['ui'],_0xe2f2('0xe'),()=>_0x5063b9[_0xe2f2('0x13')]());const _0x2b1393=new Set();this[_0xe2f2('0x15')](_0x5063b9[_0xe2f2('0x4')],_0xe2f2('0x24'),(_0x4a527b,_0xa06a2e)=>{for(const _0x4708b5 of this['g'][_0xe2f2('0x1f')]())if(_0x4708b5===_0xa06a2e['customView']){_0x2b1b51['ui'][_0xe2f2('0xd')][_0xe2f2('0x24')](_0xa06a2e[_0xe2f2('0x10')]),_0x2b1393[_0xe2f2('0x24')](_0xa06a2e);break;}}),this[_0xe2f2('0x15')](_0x5063b9[_0xe2f2('0x4')],_0xe2f2('0x19'),(_0x2ab181,_0x2b5157)=>{_0x2b1393[_0xe2f2('0x21')](_0x2b5157)&&(_0x2b1b51['ui'][_0xe2f2('0xd')][_0xe2f2('0x19')](_0x2b5157[_0xe2f2('0x10')]),_0x2b1393['delete'](_0x2b5157));});}[_0xe2f2('0x20')](_0x4d9c3e){if(_0xe2f2('0x1d')!=typeof _0x4d9c3e)throw new _0x1f3e23(_0xe2f2('0xa'));this['p'][_0xe2f2('0x24')](_0x4d9c3e);}[_0xe2f2('0x22')](){const _0x4aef9b=this['editor'][_0xe2f2('0xf')][_0xe2f2('0x1b')](_0xe2f2('0xb'));_0x4aef9b['selectedViews']=this['k'](),_0x4aef9b[_0xe2f2('0x26')]=_0x4aef9b['selectedViews'][0x0]||null;}get['g'](){const _0x466c11=new Map();for(const _0x16f563 of Array[_0xe2f2('0x1')](this['p']))for(const [_0x49e6ef,_0x81d467]of _0x16f563())_0x466c11[_0xe2f2('0x16')](_0x49e6ef,_0x81d467);return _0x466c11;}['k'](){const _0x29e665=[],_0x1d6e47=this[_0xe2f2('0x17')]['model'][_0xe2f2('0x1e')][_0xe2f2('0x7')],_0x44d515=Array[_0xe2f2('0x1')](_0x1d6e47[_0xe2f2('0x18')]());for(const [_0x55d0a7,_0x7c9fd7]of this['g']){const _0x575d74=_0x27ef63(_0x7c9fd7);_0x575d74&&_0x29e665[_0xe2f2('0x14')]([_0x55d0a7,_0x575d74]);}function _0x27ef63(_0x36f3a2){for(const _0x356f79 of _0x36f3a2)for(const _0x14bacc of _0x44d515)if(_0x356f79[_0xe2f2('0x0')](_0x14bacc,!_0x1d6e47[_0xe2f2('0x12')]))return _0x356f79;return null;}return _0x29e665[_0xe2f2('0x1a')]((_0x123c88,_0x5dac3a)=>{const _0x57f62c=_0x123c88[0x1],_0x1e41b2=_0x5dac3a[0x1];return _0x57f62c['containsRange'](_0x1e41b2)?0x1:_0x1e41b2[_0xe2f2('0x0')](_0x57f62c)?-0x1:0x0;})['map'](_0x104777=>_0x104777[0x0]);}}