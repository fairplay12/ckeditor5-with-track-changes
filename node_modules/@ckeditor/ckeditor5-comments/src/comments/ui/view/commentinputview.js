/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
import _0x21f5f2 from'@ckeditor/ckeditor5-ui/src/view';import kt from'@ckeditor/ckeditor5-ui/src/viewcollection';import pt from'../commenteditor/commenteditor';import _0x24ad66 from'@ckeditor/ckeditor5-ui/src/button/buttonview';import _0x5bfb1d from'@ckeditor/ckeditor5-utils/src/focustracker';import gt from'@ckeditor/ckeditor5-ui/src/focuscycler';import _0x869824 from'@ckeditor/ckeditor5-utils/src/keystrokehandler';import Bt from'@ckeditor/ckeditor5-core/theme/icons/check.svg';import Et from'@ckeditor/ckeditor5-core/theme/icons/cancel.svg';export default class yt extends _0x21f5f2{constructor(_0x22a731,_0x4eee2d={}){super(_0x22a731);const {t:t}=_0x22a731;this['editor']=new pt(_0x4eee2d),this['keystrokes']=new _0x869824(),this['focusTracker']=new _0x5bfb1d(),this['set']('value',_0x4eee2d['initialData']||''),this['set']('disabledSubmit',!0x1),this['set']('showButtons',!0x0),this['set']('placeholder',t('Reply...')),this['submitButtonView']=this['kt'](),this['cancelButtonView']=this['bt'](),this['setTemplate']({'tag':'div','attributes':{'class':['ck-comment__input-wrapper']},'children':[{'tag':'div','attributes':{'class':['ck-comment__input-actions',this['bindTemplate']['if']('showButtons','ck-comment__input-actions--active')]},'children':[this['submitButtonView'],this['cancelButtonView']]}]}),this['keystrokes']['set']('Esc',(_0x9c4255,_0x2770dc)=>{this['cancelButtonView']['fire']('execute'),_0x2770dc();}),this['on']('submit',(_0x163279,_0x34adc6)=>{_0x34adc6['length']>0xfa0?(alert(t({'string':'Comment\x20content\x20is\x20too\x20long.\x20Your\x20comment\x20has\x20%0\x20characters\x20but\x20the\x20limit\x20is\x20%1\x20characters.','id':'TOO_LONG_COMMENT_ALERT'},[_0x34adc6['length'],0xfa0])),_0x163279['stop']()):this['editor']['setData']('');},{'priority':'high'});}['render'](){super['render']();const {editor:_0x3e33b3,element:_0x2e775e}=this;this['keystrokes']['listenTo'](_0x2e775e),this['focusTracker']['add'](_0x2e775e),_0x3e33b3['create']()['then'](()=>{_0x2e775e['insertBefore'](_0x3e33b3['ui']['element'],_0x2e775e['firstChild']),_0x3e33b3['model']['document']['on']('change',()=>this['value']=_0x3e33b3['getData']()),_0x3e33b3['bind']('placeholder')['to'](this),this['ft'](_0x3e33b3),this['fire']('editorReady');});}['focus'](){this['editor']['focus']();}['destroy'](){return this['_t']?Promise['resolve']():(this['_t']=!0x0,this['isRendered']?this['editor']['destroy']()['then'](()=>super['destroy']()):Promise['resolve'](super['destroy']()));}['kt'](){const _0x2ea600=new _0x24ad66(this['locale']),{t:t}=this['locale'];return _0x2ea600['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--submit']}}),_0x2ea600['label']=t('Submit'),_0x2ea600['icon']=Bt,_0x2ea600['on']('execute',()=>{this['fire']('submit',this['value']);}),_0x2ea600['bind']('isEnabled')['to'](this,'value',this,'disabledSubmit',(_0x39d156,_0x435a47)=>!_0x435a47&&!!_0x39d156['trim']()),_0x2ea600;}['bt'](){const _0x4778b6=new _0x24ad66(this['locale']),{t:t}=this['locale'];return _0x4778b6['extendTemplate']({'attributes':{'class':['ck-comment__input-actions--cancel']}}),_0x4778b6['label']=t('Cancel'),_0x4778b6['icon']=Et,_0x4778b6['on']('execute',()=>{this['editor']['setData'](''),this['fire']('cancel');}),_0x4778b6;}['ft'](_0x51bec0){const _0x1eec41=this['focusTracker'],_0x16ddea=new kt();[_0x51bec0['ui']['view'],this['submitButtonView'],this['cancelButtonView']]['forEach'](_0x4471ac=>{_0x16ddea['add'](_0x4471ac),_0x1eec41['add'](_0x4471ac['element']);});const _0x4915bc=new gt({'focusables':_0x16ddea,'focusTracker':_0x1eec41});this['keystrokes']['set']('tab',(_0x19300c,_0x2317ba)=>{_0x4915bc['focusNext'](),_0x2317ba();},{'priority':'low'}),this['keystrokes']['set']('shift\x20+\x20tab',(_0x230144,_0x2c9080)=>{_0x4915bc['focusPrevious'](),_0x2c9080();},{'priority':'low'});}}