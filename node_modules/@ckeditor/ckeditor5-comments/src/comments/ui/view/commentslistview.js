/*
 *             Copyright (c) 2016 - 2020, CKSource - Frederico Knabben. All rights reserved.
 *
 *
 *
 *
 *          +---------------------------------------------------------------------------------+
 *          |                                                                                 |
 *          |                                 Hello stranger!                                 |
 *          |                                                                                 |
 *          |                                                                                 |
 *          |   What you're currently looking at is the source code of a legally protected,   |
 *          |    proprietary software. Any attempts to deobfuscate / disassemble this code    |
 *          |               are forbidden and will result in legal consequences.              |
 *          |                                                                                 |
 *          |                                                                                 |
 *          +---------------------------------------------------------------------------------+
 *
 *
 *
 *
 */
const _0x5aa6=['count','visibleViews','isEditMode','_config','some','add','_model','_collapsedCommentsView','collapse','bind','stopListening','destroy','commentViews','delegate','get','editorConfig','ck-thread__comments','commentUpdated','removeComment','listenTo','length','hasDirtyComment','expand','setTemplate','isActive','equal','render','refreshVisibleViews','focus','locale','maxCommentCharsWhenCollapsed','from','comments','change:hasDirtyComment','change:isEditMode','maxThreadTotalWeight','remove'];(function(_0x54ba02,_0x5aa621){const _0x3d7ff4=function(_0x514a28){while(--_0x514a28){_0x54ba02['push'](_0x54ba02['shift']());}};_0x3d7ff4(++_0x5aa621);}(_0x5aa6,0x1c8));const _0x3d7f=function(_0x54ba02,_0x5aa621){_0x54ba02=_0x54ba02-0x0;let _0x3d7ff4=_0x5aa6[_0x54ba02];return _0x3d7ff4;};import _0x3ae85a from'@ckeditor/ckeditor5-ui/src/view';import _0x165cd5 from'@ckeditor/ckeditor5-utils/src/diff';import _0x4d3057 from'./collapsedcommentsview';import _0x4b5189 from'@ckeditor/ckeditor5-utils/src/collection';export default class vt extends _0x3ae85a{constructor(_0x3f9c37,_0x549250,_0x3dac5f){super(_0x3f9c37),this['set']('hasDirtyComment',!0x1),this['set'](_0x3d7f('0x8'),_0x549250[_0x3d7f('0x14')][_0x3d7f('0x8')]),this['set'](_0x3d7f('0xc'),!0x1),this[_0x3d7f('0x1f')]=_0x549250,this[_0x3d7f('0x1c')]=_0x3dac5f,this[_0x3d7f('0x0')]=this['createCollection'](),this['visibleViews']=this['createCollection'](),this[_0x3d7f('0x20')]=new _0x4d3057(_0x3f9c37),this[_0x3d7f('0x20')][_0x3d7f('0x22')]('count')['to'](this,'length',_0x427af5=>_0x427af5-this[_0x3d7f('0x1c')]['maxCommentsWhenCollapsed']);for(const _0x3d867c of _0x549250['comments'])this['Ct'](_0x3d867c);this[_0x3d7f('0x7')](_0x549250[_0x3d7f('0x14')],'add',(_0x1130fb,_0x3491a6)=>{this[_0x3d7f('0x8')]++,this['Ct'](_0x3491a6),this[_0x3d7f('0xf')]();}),this['listenTo'](_0x549250['comments'],_0x3d7f('0x18'),(_0x35a5e7,_0x546f8c)=>{this['length']--,this['gt'](_0x546f8c),this[_0x3d7f('0xf')]();}),this[_0x3d7f('0x7')](_0x549250,_0x3d7f('0x5'),()=>this['refreshVisibleViews']()),this['on']('change:isActive',()=>this[_0x3d7f('0xf')]()),this['on'](_0x3d7f('0x15'),()=>this[_0x3d7f('0xf')]()),this[_0x3d7f('0xb')]({'tag':'ul','attributes':{'class':[_0x3d7f('0x4')]},'children':this[_0x3d7f('0x1a')]});}get['yt'](){return this['_model']['weight']>this[_0x3d7f('0x1c')][_0x3d7f('0x17')]&&!this[_0x3d7f('0xc')]&&!this[_0x3d7f('0x9')];}[_0x3d7f('0xe')](){super[_0x3d7f('0xe')](),this[_0x3d7f('0xf')]();}[_0x3d7f('0x10')](){this['element'][_0x3d7f('0x10')]();}['destroy'](){this['_collapsedCommentsView'][_0x3d7f('0x24')]();for(const _0x18339d of this[_0x3d7f('0x0')])_0x18339d[_0x3d7f('0x24')]();super['destroy']();}[_0x3d7f('0xf')](){this['yt']?this['vt']():this['At']();}['Ct'](_0x26f1c5){const _0x530ca4=new this[(_0x3d7f('0x1c'))]['CommentView'](this[_0x3d7f('0x11')],_0x26f1c5,{'maxCommentCharsWhenCollapsed':this[_0x3d7f('0x1c')][_0x3d7f('0x12')],'formatDateTime':this[_0x3d7f('0x1c')]['formatDateTime'],'editorConfig':this[_0x3d7f('0x1c')][_0x3d7f('0x3')]});_0x530ca4['viewUid']=_0x26f1c5['id'],_0x530ca4[_0x3d7f('0x1')](_0x3d7f('0x6'))['to'](this),_0x530ca4['delegate']('updateComment')['to'](this),this[_0x3d7f('0x7')](_0x530ca4,_0x3d7f('0x16'),()=>this['xt']()),this[_0x3d7f('0x0')][_0x3d7f('0x1e')](_0x530ca4);}['gt'](_0x2ef48a){const _0x34ed21=this[_0x3d7f('0x0')][_0x3d7f('0x18')](_0x2ef48a['id']);this[_0x3d7f('0x23')](_0x34ed21),_0x34ed21[_0x3d7f('0x1b')]&&this['xt'](),_0x34ed21[_0x3d7f('0x24')]();}['xt'](){this[_0x3d7f('0x9')]=Array[_0x3d7f('0x13')](this[_0x3d7f('0x0')])[_0x3d7f('0x1d')](_0x17d024=>_0x17d024['isEditMode']);}['vt'](){const _0x2ea496=function(_0x1713fb){const _0x53d620=new _0x4b5189();for(const _0x114ad8 of _0x1713fb)_0x53d620[_0x3d7f('0x1e')](_0x114ad8);return _0x53d620;}(this[_0x3d7f('0x0')]),_0xacd2=this[_0x3d7f('0x20')][_0x3d7f('0x19')];for(let _0x59f3b6=0x1;_0x59f3b6<=_0xacd2;_0x59f3b6++)_0x2ea496['remove'](0x1);for(const _0x379527 of _0x2ea496)_0x379527[_0x3d7f('0x21')]();_0xacd2>0x0&&_0x2ea496[_0x3d7f('0x1e')](this[_0x3d7f('0x20')],0x1),Dt(_0x165cd5(Array[_0x3d7f('0x13')](this[_0x3d7f('0x1a')]),Array[_0x3d7f('0x13')](_0x2ea496)),this['visibleViews'],_0x2ea496);}['At'](){Dt(_0x165cd5(Array[_0x3d7f('0x13')](this[_0x3d7f('0x1a')]),Array[_0x3d7f('0x13')](this[_0x3d7f('0x0')])),this[_0x3d7f('0x1a')],this[_0x3d7f('0x0')]);for(const _0x1bdef1 of this[_0x3d7f('0x1a')])_0x1bdef1[_0x3d7f('0xa')]();}}function Dt(_0x2858c7,_0x387f01,_0x300d7e){let _0x39f7e0=0x0;for(const _0x3886be of _0x2858c7)switch(_0x3886be){case'insert':_0x387f01['add'](_0x300d7e[_0x3d7f('0x2')](_0x39f7e0),_0x39f7e0),_0x39f7e0++;break;case'delete':_0x387f01['remove'](_0x39f7e0);break;case _0x3d7f('0xd'):_0x39f7e0++;}}